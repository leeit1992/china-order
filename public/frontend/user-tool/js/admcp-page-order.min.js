!function(r){"use strict";new(Backbone.View.extend({el:"#avt-admcp-handle-order",formClassError:"has-danger",events:{"submit #avt-admcp-order-form":"handleForm","click .avt-price-kg-choose":"addPriceKg"},initialize:function(){},handleForm:function(e){var a=this,t=new Array,n=r("input[name=avt_admcp_order_code]",this.el);0!==n.val().length&&!1===AVTLIB.validateStringSearch(n.val())?(n.parent().addClass(a.formClassError),t.push("code",1)):(n.parent().removeClass(a.formClassError),t.splice("code",1));var d=r("input[name=avt_admcp_order_date]",this.el);return 0!==d.val().length&&!1===AVTLIB.validateDateSearch(d.val())?(d.parent().addClass(a.formClassError),t.push("date",1)):(d.parent().removeClass(a.formClassError),t.splice("date",1)),0===t.length&&(this.handleSearch(e),!1)},handleSearch:function(e){var a={formData:r("#avt-admcp-order-form",this.el).serialize()},t=this;r(".avt-admcp-orders-not-js",this.el).fadeOut(),r(".avt-admcp-orders-js",this.el).fadeIn(),r.get(AVTDATA.adminUrl+"/ajax-admcp-order-manage",a,function(e){var a=JSON.parse(e);r(".avt-admcp-orders-js",t.el).html(a.output)})},addPriceKg:function(e){var a=r(e.currentTarget).attr("data-price"),t=r(e.currentTarget).attr("data-text"),n=r(e.currentTarget).attr("data-key"),d=r(e.currentTarget).closest(".avt-item-order-form-"+n).find(".avt-order-shop-weight").val();if(0!=d.length){r(e.currentTarget).closest(".avt-item-order-form-"+n).find(".avt-price-kg").html(t);r(e.currentTarget).closest(".avt-item-order-form-"+n).find(".avt-price-set-from-weight").val(a*d)}else alert("Số cân nặng phải lớn hơn 0.");return!1}}))}(jQuery);