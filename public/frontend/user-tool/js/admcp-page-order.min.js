!function(e){"use strict";new(Backbone.View.extend({el:"#avt-admcp-handle-order",formClassError:"has-danger",events:{"submit #avt-admcp-order-form":"handleForm","click .avt-price-kg-choose":"addPriceKg"},initialize:function(){e(".avt-price-status").change(function(){var r=e(this).closest(".avt-group-item");console.log(r),2==e(this).val()?r.find(".avt-input-weight").hide():r.find(".avt-input-weight").show()})},handleForm:function(r){var a=this,t=new Array,n=e("input[name=avt_admcp_order_code]",this.el);0!==n.val().length&&!1===AVTLIB.validateStringSearch(n.val())?(n.parent().addClass(a.formClassError),t.push("code",1)):(n.parent().removeClass(a.formClassError),t.splice("code",1));var s=e("input[name=avt_admcp_order_date]",this.el);return 0!==s.val().length&&!1===AVTLIB.validateDateSearch(s.val())?(s.parent().addClass(a.formClassError),t.push("date",1)):(s.parent().removeClass(a.formClassError),t.splice("date",1)),0===t.length&&(this.handleSearch(r),!1)},handleSearch:function(r){var a={formData:e("#avt-admcp-order-form",this.el).serialize()},t=this;e(".avt-admcp-orders-not-js",this.el).fadeOut(),e(".avt-admcp-orders-js",this.el).fadeIn(),e.get(AVTDATA.adminUrl+"/ajax-admcp-order-manage",a,function(r){var a=JSON.parse(r);e(".avt-admcp-orders-js",t.el).html(a.output)})},addPriceKg:function(r){var a=e(r.currentTarget).attr("data-price"),t=e(r.currentTarget).attr("data-text"),n=e(r.currentTarget).attr("data-key"),s=e(r.currentTarget).closest(".avt-item-order-form-"+n).find(".avt-order-shop-weight").val();if(0!=s.length){e(r.currentTarget).closest(".avt-item-order-form-"+n).find(".avt-price-kg").html(t);e(r.currentTarget).closest(".avt-item-order-form-"+n).find(".avt-price-set-from-weight").val(a*s)}else alert("Số cân nặng phải lớn hơn 0.");return!1}}))}(jQuery);